{% extends "base.html" %}
{% block title %}Users{% endblock %}
{% block content %}
<h1 class="mb-4">Whitelisted users</h1>

<a class="btn btn-primary mb-3" href="{{ url_for('add_user') }}">‚ûï Add user</a>

<table class="table table-hover">
  <thead class="table-light">
    <tr><th>#</th><th>Username</th><th>Name</th><th></th></tr>
  </thead>
  <tbody>
    {% for u in users %}
      <tr>
        <td>{{ loop.index }}</td>
        <td>{{ u.username }}</td>
        <td>{{ u.name }} {{ u.surname }}</td>
        <td>
          <a class="btn btn-sm btn-danger"
             href="{{ url_for('delete_user', username=u.username) }}"
             onclick="return confirm('Delete {{u.username}}?')">üóë</a>
        </td>
      </tr>
    {% endfor %}
  </tbody>
</table>
{% endblock %}
<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>ADMIN CENTER</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <script>
        function confirmDelete(id) {
            if (confirm("Ali si prepriƒçan, da ≈æeli≈° izbrisati uporabnika?")) {
                window.location.href = "/delete_user/" + id;
            }
        }
    </script>
</head>
<body>
    <div class="container">
        <h1>ADMIN CENTER</h1>
        <a href="{{ url_for('add_user') }}" class="button">ADD USER</a>
        
        <table>
            <thead>
                <tr>
                    <th>Username</th>
                    <th>Name</th>
                    <th>Surname</th>
                    <th>Delete</th>
                </tr>
            </thead>
            <tbody>
                {% for user in users %}
                <tr>
                    <td>{{ user.username }}</td>
                    <td>{{ user.name }}</td>
                    <td>{{ user.surname }}</td>
                    <td><button onclick="confirmDelete('{{ user.id }}')" class="delete">‚úñ</button></td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</body>
</html>
